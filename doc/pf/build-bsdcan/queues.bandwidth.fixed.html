<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Splitting your bandwidth into fixed-size chunks</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79 and dbslide HTML stylesheet Version 0.1"><LINK
REL="HOME"
TITLE="Building The Network You Need With PF, The OpenBSD Packet Filter"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="What Is Your Usable Bandwidth?"
HREF="queues.usable.bandwidth.html"><LINK
REL="NEXT"
TITLE="Fixed-size allocations - match assignment"
HREF="queues.bandwidth.fixed.match.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="dbslide.css"><SCRIPT
LANGUAGE="JavaScript1.2"
TYPE="text/JavaScript"
>var Netscape = new Boolean();
  if(navigator.appName == 'Netscape')  Netscape = true;  

  function keypress(event)
  {
   if(Netscape)
    { 
      switch(event.which)
      {
      case 13:
      case 32:
      case 110:window.location.href='queues.bandwidth.fixed.match.html';break;
      case 8:
      case 98:
      case 112:window.location.href='queues.usable.bandwidth.html';break;
      case 104:window.location.href='index.html';break;
      }  
      return true;
    }
  }
  function mousepress(event)  
  {
   if(Netscape)
   {
     if (event.modifiers &#38; Event.ALT_MASK)
     {window.location.href='index.html';}
     else if (event.pageX &#60; 200)
     {window.location.href='queues.usable.bandwidth.html';}
     else
     {window.location.href='queues.bandwidth.fixed.match.html';}
     return true;
   }
  }
  document.onkeydown = keypress;
  document.onmouseup = mousepress;</SCRIPT
><SCRIPT
FOR="document"
EVENT="onkeydown()"
LANGUAGE="JScript"
TYPE="text/JScript"
>{ 
      switch(window.event.keyCode)
      {
      case 13:
      case 70:
      case 78:window.location.href='queues.bandwidth.fixed.match.html';break;
      case 66:
      case 80:window.location.href='queues.usable.bandwidth.html';break;
      case 72:window.location.href='index.html';break;
      }  
      return true;}</SCRIPT
><SCRIPT
FOR="document"
EVENT="onmouseup()"
LANGUAGE="JScript"
TYPE="text/JScript"
>{
     if (window.event.altKey)
     {window.location.href='index.html';}
     else
     {
       if (window.event.clientX &#60; 200) 
       {window.location.href='queues.usable.bandwidth.html';}
       else
       {window.location.href='queues.bandwidth.fixed.match.html';}
     }
     return true;}</SCRIPT
></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Building The Network You Need With PF, The OpenBSD Packet Filter: BSDCan 2016, Ottawa, Canada, June 8th 2016</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="queues.usable.bandwidth.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="queues.bandwidth.fixed.match.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="QUEUES.BANDWIDTH.FIXED"
></A
>Splitting your bandwidth into fixed-size chunks</H1
><P
>For static shaping, give bandwidth values in absolute values:</P
><PRE
CLASS="SCREEN"
>queue main on $ext_if bandwidth 20M
      queue defq parent main bandwidth 3600K default
      queue ftp parent main bandwidth 2000K
      queue udp parent main bandwidth 6000K
      queue web parent main bandwidth 4000K
      queue ssh parent main bandwidth 4000K
        queue ssh_interactive parent ssh bandwidth 800K
        queue ssh_bulk parent ssh bandwidth 3200K
 queue icmp parent main bandwidth 400K</PRE
><P
>Only leaf queues can be assigned traffic, make sure allocations sum up to parent queue allocation.</P
><P
>Traditional-style allocation via <KBD
CLASS="USERINPUT"
>pass</KBD
> rules</P
><PRE
CLASS="SCREEN"
>set skip on { lo, $int_if }
pass log quick on $ext_if proto tcp to port ssh \
	queue (ssh_bulk, ssh_interactive) set prio (5,7)
pass in quick on $ext_if proto tcp to port ftp queue ftp
pass in quick on $ext_if proto tcp to port www queue http
pass out on $ext_if proto udp queue udp
pass out on $ext_if proto icmp queue icmp
pass out on $ext_if proto tcp from $localnet to port $client_out </PRE
></DIV
></BODY
></HTML
>